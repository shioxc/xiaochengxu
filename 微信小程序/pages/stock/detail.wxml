<!-- stock-detail.wxml -->
<view class="container">
  <!-- 交易页面内容 -->
  <view wx:if="{{currentTab === 'trade'}}" class="content">
    <!-- 基础信息 -->
    <view class="base-info">
      <view class="stock-header">
        <text class="name">{{stockInfo.name}}({{stockInfo.code}})</text>
        <text class="price {{stockInfo.current > stockInfo.prevClose ? 'rise' : 'fall'}}">
          {{stockInfo.current}}
        </text>
      </view>
      <view class="detail-grid">
        <view>今开：{{stockInfo.open}}</view>
        <view>最高：{{stockInfo.high}}</view>
        <view>昨收：{{stockInfo.prevClose}}</view>
        <view>最低：{{stockInfo.low}}</view>
        <view>换手率：{{stockInfo.turnoverRate}}</view>
        <view>成交量：{{stockInfo.volume}}</view>
        <view>成交额：{{stockInfo.amount}}</view>
      </view>
    </view>
    <!-- K线图 -->
    <view class="k-line">
      <view class="k-tabs">
        <view 
          wx:for="{{['min','daily','weekly','monthly']}}"
          wx:key="index"
          class="k-tab {{currentKType === item ? 'active' : ''}}"
          data-type="{{item}}" 
          bindtap="switchKType">
          {{kTypeMap[item]}}
        </view>
      </view>
      <image src="{{kLineUrl}}" class="k-image" mode="widthFix"/>
    </view>
    <!-- 买卖盘口 -->
    <view class="order-box">
      <view class="bids">
        <view class="header">买档</view>
        <view wx:for="{{bids}}" wx:key="index" class="order-item">
          <text>买{{index + 1}}</text>
          <text class="price">{{item.price}}</text>
          <text class="volume">{{item.volume}}</text>
        </view>
      </view>
      <view class="asks">
        <view class="header">卖档</view>
        <view wx:for="{{asks}}" wx:key="index" class="order-item">
          <text>卖{{index + 1}}</text>
          <text class="price">{{item.price}}</text>
          <text class="volume">{{item.volume}}</text>
        </view>
      </view>
    </view>

    <!-- 新闻模块 -->
    <view class="news-section">
        <view class="section-title">最新资讯</view>
        <view class="news-list">
            <view 
                class="news-item" 
                wx:for="{{newsList}}" 
                wx:key="id"
                bindtap="onNewsClick"
                data-id="{{item.id}}"
                data-title="{{item.title}}"
            >
                <view class="news-title">{{item.title}}</view>
                <view class="news-time">{{item.time}}</view>
            </view>
        </view>
    </view>
  </view>

  <!-- 自选页面内容 -->
  <view wx:if="{{currentTab === 'watch'}}" class="other-tab">
    自选功能开发中...
  </view>

  <!-- 分享页面内容 -->
  <view wx:if="{{currentTab === 'share'}}" class="other-tab">
  <view class="share-content">
    <view class="share-title">分享内容：</view>
    <view class="share-info">
      <text>股票名称：{{stockInfo.name}} ({{stockInfo.code}})</text>
    </view>
    <view class="share-info">
      <text>分享页面：当前股票详情页</text>
    </view>
    <!-- 新增分享提示 -->
    <view class="share-tip">请点击右上角进行分享</view>
  </view>
</view>

  <!-- 底部导航栏 -->
  <view class="bottom-tabs">
    <view 
      class="tab {{currentTab === 'trade' ? 'active' : ''}}" 
      data-tab="trade" 
      bindtap="switchTab">
      交易
    </view>
    <view 
      class="tab {{currentTab === 'watch' ? 'active' : ''}}" 
      data-tab="watch" 
      bindtap="switchTab">
      自选
    </view>
    <view 
      class="tab {{currentTab === 'share' ? 'active' : ''}}" 
      data-tab="share" 
      bindtap="switchTab">
      分享
    </view>
  </view>
</view>